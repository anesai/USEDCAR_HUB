<div class="container">
  <div class="row justify-content-center">

    <!-- Car Image Carousel Column (Left) -->
    <div class="col-md-9 my-5">
      <div id="carImageCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <!-- Loop through car photos and create carousel items -->
          <% @car.photos.each_with_index do |photo, index| %>
            <div class="carousel-item <%= index == 0 ? 'active' : '' %>">
              <!-- Display car image using Cloudinary's 'cl_image_tag' helper -->
              <%= cl_image_tag photo.key, class: "carousel-image" %>
            </div>
          <% end %>
        </div>
        <!-- Carousel navigation button (Previous) -->
        <button class="carousel-control-prev" type="button" data-bs-target="#carImageCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <!-- Carousel navigation button (Next) -->
        <button class="carousel-control-next" type="button" data-bs-target="#carImageCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>

      <!-- Car Description -->
      <div class="mt-3" style="font-size: 20px;"> <!-- Increase text size as needed -->
        <p class="card-text">
          <strong>Description:</strong> <%= @car.description %>
        </p>
      </div>
    </div>

    <!-- Car Details Column (Right) -->
    <div class="col-md-3 my-5 border-0">
      <div class="card card--container">

        <!-- Car Details Content -->
        <div class="card-body mx-5">

          <!-- Car Title (Brand and Model side by side) -->
          <h2 class="card-title" style="font-size: 24px;"> <!-- Increase text size as needed -->
            <!-- Display car brand and model -->
            <%= @car.brand %> - <%= @car.model %>
          </h2>

          <!-- Car Price -->
          <p class="card-text" style="font-size: 22px;"> <!-- Increase text size as needed -->
            Price:<strong id="price--num"> €<%= humanized_money @car.price %></strong>
          </p>

          <!-- Car Brand -->
          <p class="card-text" style="font-size: 18px;"> <!-- Increase text size as needed -->
            <strong>Brand:</strong> <%= @car.brand %>
          </p>

          <!-- Car Year -->
          <p class="card-text" style="font-size: 18px;"> <!-- Increase text size as needed -->
            <strong>Year:</strong> <%= @car.year %>
          </p>

          <!-- Buy button (not functional for now) -->
          <%= simple_form_for [@car, @order] do |f| %>
          <%= f.submit "Buy", class: "btn btn-primary" %>
          <% end %>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- Car Cards Section (same code from index but modified the .each method to display 3 cards) -->
<div class="container">
  <div class="row">
    <% @cars.first(3).each do |car| %>
      <div class="col-md-4">
        <div class="card mt-4 car-card">
          <% if car.photos.present? %>
            <%= link_to car_path(car.id) do %>
              <%= cl_image_tag car.photos.first.key, class: "card-img-top", alt: "Car Photo" %>
            <% end %>
          <% else %>
            <!-- Use the default photo when no photos are available -->
            <%= link_to car_path(car.id) do %>
              <%= image_tag "usedcar_hub.jpg", class: "card-img-top", alt: "Default Car Photo" %>
            <% end %>
          <% end %>
          <div class="card-body">
            <h4 class="card-title"><strong><%= car.brand %></strong></h4>
            <h5 class="card-text"><%= "#{car.year} #{car.model}" %></h5>
            <p class="card-text" id="price--num">€<%= humanized_money car.price %></p>
            <p><%= link_to "See more details...", car_path(car.id) %></p>
            <p class="delete-edit-btn">
              <% if user_signed_in? && current_user == car.user %>
                <%= link_to "Edit", edit_car_path(car.id), class: "btn btn-outline-info link-btn" %>
                <%= link_to "Delete", car_path(car.id), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "btn btn-outline-danger link-btn" %>
              <% end %>
            </p>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
